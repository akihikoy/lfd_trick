#!/usr/bin/python
#\file    plot_traj.py
#\brief   certain python script
#\author  Akihiko Yamaguchi, info@akihikoy.net
#\version 0.1
#\date    Dec.23, 2015
#NOTE: We need qplot.
import os

#q_traj= [
  #[-1.0717893596754755, -0.064307672242593483, 0.10805746088982804, 1.2107628752343889, -0.7874843001607974, -0.96366783518437826, 0.16200349906209788], 
  #[-1.0758566937682521, -0.12083074462243922, 0.14201537326533342, 1.3362508945192975, -0.70294184879216814, -0.98466983920158047, 0.072698073226118279], 
  #[-1.0819304902572711, -0.17052000780544779, 0.17945642087428609, 1.4500654483213242, -0.62028599519453864, -1.0085335498622658, -0.010808754020409378], 
  #[-1.0910832140345748, -0.21319975090467896, 0.21920300443491181, 1.5527698230178646, -0.54132902039152009, -1.0359075812850134, -0.08742998098504251], 
  #[-1.1041739012274912, -0.24884116075617205, 0.2594248242021534, 1.6449985092904404, -0.46842013769381963, -1.0670274919413925, -0.1555234830551469], 
  #[-1.1221312540179798, -0.27763139524510416, 0.29788293510641578, 1.7274957052027931, -0.40437287647723719, -1.1014618017053877, -0.21331028351662609], 
  #[-1.1456575947574361, -0.30180333410049409, 0.33412669742761286, 1.8047726645066444, -0.34958466698550889, -1.1393931532412611, -0.2619894049889297], 
  #[-1.1738234885075249, -0.3249875480776942, 0.3711931758876435, 1.8841405758246419, -0.2995565601937506, -1.1823195330086922, -0.30657348837316434], 
  #[-1.2055369372827454, -0.34647406777340717, 0.40895308433457311, 1.9640578601842826, -0.25352147172769868, -1.2290857167527982, -0.34688379223210236], 
  #[-1.2397071517824954, -0.36559021400271297, 0.44719981859953639, 2.0428950928641978, -0.21072643231805999, -1.2785377504642685, -0.38283759121265565], 
  #[-1.2756845209087024, -0.38154592758946415, 0.48624009110549948, 2.1191375759266919, -0.17047405052157241, -1.3295466936042397, -0.41505157390441433], 
  #[-1.312902005593807, -0.39350134335086162, 0.52650328170392457, 2.1913613560469645, -0.1320604274183719, -1.3811568227406734, -0.44441599271244159], 
  #[-1.3511935336581817, -0.4002638027783077, 0.56884138752868219, 2.2581506186643758, -0.094974382349428149, -1.4325607155111257, -0.47245402763130939], 
  #[-1.3688174341692907, -0.41636523949786253, 0.59391581999385779, 2.3205289200639942, -0.050440924709432802, -1.485159681284602, -0.47512194078524372], 
  #[-1.5542981387218637, 1.5348496928945359, -1.0181127289332557, 4.253581653976247, -0.4814104684061779, -5.4401146039951875, 0.58060769130651213], 
  #[-1.533342838634711, -0.30958629237462754, 0.77060844617438051, 2.4030274589990208, -0.024608612235071929, -1.5790813982988263, -0.65424618515705513], 
  #[-1.4343023575514022, -0.41614244818113094, 0.70672418258013969, 2.4520768455822015, 0.081784008699437624, -1.6255795698037729, -0.50682712995730139], 
  #[-1.3764558575798957, -0.47066176720772029, 0.68334424436195773, 2.4829447014925639, 0.16788292834489071, -1.6542687460450709, -0.42346480722552338], 
  #[-1.3334364418619884, -0.50404366677021284, 0.67857611327458467, 2.4976526394634595, 0.24866671247281974, -1.6714864740864279, -0.36647985848545112], 
  #[-1.2776661363954294, -0.53982875671715713, 0.66608878065011345, 2.4978461813602451, 0.3363511264636177, -1.6715721185871419, -0.30402221090463655]]
#t_traj= [1.2088666163179218, 1.9931667368486006, 2.4673940443570466, 2.788345215283736, 3.018916930965176, 3.1907860891159108, 3.3407860891159107, 
  #3.490786089115911, 3.640786089115911, 3.790786089115911, 3.9407860891159108, 4.090786089115911, 4.240786089115911, 4.390786089115911, 9.472074975554449, 15.235937429520584, 15.65217241313974, 15.953456267158002, 16.289545452454153, 17.160956475369137]
#q_traj= [
  #[-1.0717893596754755, -0.064307672242593483, 0.10805746088982804, 1.2107628752343889, -0.7874843001607974, -0.96366783518437826, 0.16200349906209788], [-1.0758566937682521, -0.12083074462243922, 0.14201537326533342, 1.3362508945192975, -0.70294184879216814, -0.98466983920158047, 0.072698073226118279], 
  #[-1.0819304902572711, -0.17052000780544779, 0.17945642087428609, 1.4500654483213242, -0.62028599519453864, -1.0085335498622658, -0.010808754020409378], [-1.0910832140345748, -0.21319975090467896, 0.21920300443491181, 1.5527698230178646, -0.54132902039152009, -1.0359075812850134, -0.08742998098504251], 
  #[-1.1041739012274912, -0.24884116075617205, 0.2594248242021534, 1.6449985092904404, -0.46842013769381963, -1.0670274919413925, -0.1555234830551469], [-1.1221312540179798, -0.27763139524510416, 0.29788293510641578, 1.7274957052027931, -0.40437287647723719, -1.1014618017053877, -0.21331028351662609], 
  #[-1.1456575947574361, -0.30180333410049409, 0.33412669742761286, 1.8047726645066444, -0.34958466698550889, -1.1393931532412611, -0.2619894049889297], [-1.1738234885075249, -0.3249875480776942, 0.3711931758876435, 1.8841405758246419, -0.2995565601937506, -1.1823195330086922, -0.30657348837316434], 
  #[-1.2055369372827454, -0.34647406777340717, 0.40895308433457311, 1.9640578601842826, -0.25352147172769868, -1.2290857167527982, -0.34688379223210236], [-1.2397071517824954, -0.36559021400271297, 0.44719981859953639, 2.0428950928641978, -0.21072643231805999, -1.2785377504642685, -0.38283759121265565], 
  #[-1.2756845209087024, -0.38154592758946415, 0.48624009110549948, 2.1191375759266919, -0.17047405052157241, -1.3295466936042397, -0.41505157390441433], [-1.312902005593807, -0.39350134335086162, 0.52650328170392457, 2.1913613560469645, -0.1320604274183719, -1.3811568227406734, -0.44441599271244159], 
  #[-1.3511935336581817, -0.4002638027783077, 0.56884138752868219, 2.2581506186643758, -0.094974382349428149, -1.4325607155111257, -0.47245402763130939], [-1.3688174341692907, -0.41636523949786253, 0.59391581999385779, 2.3205289200639942, -0.050440924709432802, -1.485159681284602, -0.47512194078524372], 
  #[-1.5542981387218637, 1.5348496928945359, -1.0181127289332557, 4.253581653976247, -0.4814104684061779, -5.4401146039951875, 0.58060769130651213], [-1.533342838634711, -0.30958629237462754, 0.77060844617438051, 2.4030274589990208, -0.024608612235071929, -1.5790813982988263, -0.65424618515705513], 
  #[-1.4343023575514022, -0.41614244818113094, 0.70672418258013969, 2.4520768455822015, 0.081784008699437624, -1.6255795698037729, -0.50682712995730139], [-1.3764558575798957, -0.47066176720772029, 0.68334424436195773, 2.4829447014925639, 0.16788292834489071, -1.6542687460450709, -0.42346480722552338], 
  #[-1.3334364418619884, -0.50404366677021284, 0.67857611327458467, 2.4976526394634595, 0.24866671247281974, -1.6714864740864279, -0.36647985848545112], [-1.2776661363954294, -0.53982875671715713, 0.66608878065011345, 2.4978461813602451, 0.3363511264636177, -1.6715721185871419, -0.30402221090463655]]
#t_traj= [0.15, 0.3, 0.45, 0.6, 0.75, 0.9, 1.05, 1.2, 1.35, 1.5, 1.65, 1.8, 1.95, 2.1, 2.25, 2.4, 2.55, 2.7, 2.85, 3.0]
q_traj= [
  [-1.0544096854806089, -0.2776862141411402, 0.28087579936236179, 1.6743394798167504, -0.56010443409106647, -1.4960295455121526, 0.57304766831757548],
  [-1.0159048510309103, -0.35670424794068467, 0.33155411397969409, 1.8633858091147795, -0.47760512948645528, -1.5669787327781961, 0.42943210292684869],
  [-0.96476264324992855, -0.42311836836398564, 0.39891331930441265, 2.0439506789702975, -0.37623150979886999, -1.6560476331050802, 0.28551453075495919],
  [-0.92135636878025318, -0.46074409246091941, 0.45219267225159882, 2.1723939241120336, -0.29270704439420275, -1.7386809973087964, 0.17859944748797052],
  [-0.91656936668207734, -0.46815040865258956, 0.44552228082284107, 2.23785467540214, -0.27927621904754196, -1.7900609544614621, 0.13306757513154097],
  [-0.93221128726280056, -0.46074694640818792, 0.4028452571883796, 2.2804654161510274, -0.30677314754121038, -1.8313667753638549, 0.11292969674597057],
  [-0.95616162214784528, -0.4438852029022185, 0.3410417135902617, 2.3111201017741747, -0.35492921493141205, -1.8713039748545086, 0.10151482877769019],
  [-0.98726375374869657, -0.41888678102704663, 0.26351591185117751, 2.3249457989019198, -0.4190347361664789, -1.9063122558890606, 0.097811529213398987],
  [-1.0242863194214729, -0.38779126582438822, 0.17653166339142254, 2.3179885163791289, -0.49143987933855837, -1.9329493608376833, 0.1015981943603622],
  [-1.0656439567205895, -0.35291260947696607, 0.088150274951116991, 2.288431318010566, -0.5628497638992821, -1.9487387446436377, 0.11298602776161597],
  [-1.1093022995220323, -0.31625308645432337, 0.0060286379659039453, 2.2371535204199069, -0.62494896087120411, -1.9526402401261265, 0.13156378816155415],
  [-1.1529369448473732, -0.27921815728965166, -0.064511176363831246, 2.1674541197858996, -0.67262675398564087, -1.9448884257954011, 0.15577138596582199],
  [-1.1941583016955246, -0.2427746643154888, -0.12106907666635845, 2.0842902079877921, -0.70442681842261712, -1.9265182356842492, 0.18293576997005481],
  [-1.2306277028657173, -0.2078345031326814, -0.16355796294151093, 1.9935418251652242, -0.72147025495074257, -1.8989935296867262, 0.20976421147725308],
  [-1.2601494641579252, -0.1754772449445727, -0.19278311631736536, 1.8987549292218027, -0.72543267928147837, -1.8618017119766488, 0.2344030341002333],
  [-1.2820829098828739, -0.140350093340425, -0.20468057608344964, 1.7555429674580416, -0.71194974213929796, -1.7803069844426007, 0.27883255052236938],
  [-1.2963234838184399, -0.091146422224025386, -0.20502880942036245, 1.5646316591788036, -0.69127656886362843, -1.6637240498207164, 0.33486503311347571],
  [-1.3040405608865098, -0.027555656757953781, -0.20189327344255442, 1.3558203264485023, -0.67360914409511163, -1.5378054333056337, 0.38594834680744561],
  [-1.3052683310380491, 0.032722855229927496, -0.19958386393719424, 1.1805017632013304, -0.66021822984803624, -1.4315895338502982, 0.4147167986184731],
  [-1.2965664001224004, 0.051749212231033355, -0.19847320614447614, 1.1254808297736065, -0.64272551631330899, -1.386163254253725, 0.39388220133306295]]
t_traj= [1.779648830049163, 3.2565732776900154, 4.1970153081875035, 4.69874673452241, 4.94874673452241, 5.19874673452241, 5.44874673452241,
  5.69874673452241, 5.94874673452241, 6.19874673452241, 6.44874673452241, 6.69874673452241, 6.94874673452241, 7.19874673452241, 7.44874673452241,
  7.896284115034163, 8.642031412999936, 9.729590437636922, 11.099266713005452, 11.958968797813638]

def Main():
  assert(len(q_traj)==len(t_traj))
  outfile= '/tmp/plot_traj.dat'
  fp= open(outfile,'w')
  for t,q in zip(t_traj,q_traj):
    fp.write('%f %s\n'%(t,' '.join(map(str,q))))
  fp.close()

  pline= ''
  for i in range(len(q_traj)):
    pline+=''' %s u 1:%i w lp t '"joint %i"' '''%(outfile,i+2,i)

  commands=[
    '''qplot -x2 aaa %s &'''%pline,
    '''''',
    '''''',
    ]
  for cmd in commands:
    if cmd!='':
      cmd= ' '.join(cmd.splitlines())
      print '###',cmd
      os.system(cmd)

  print '##########################'
  print '###Press enter to close###'
  print '##########################'
  raw_input()
  os.system('qplot -x2kill aaa')

if __name__=='__main__':
  Main()
